<!-- File Edited on 07/21/2020 by Yifan Yao: Insert Bootstrap for better view -->
<!-- File Edited on 07/23/2020 by Troy Stein: Bars user access from modifying other people's entries -->
<!-- File Edited on 07/25/2020 by Yifan Yao: Bug fixes for user authentication -->
<!-- File Edited on 07/25/2020 by Yifan Yao: Add roles for Admin -->
<div class="container-fluid bg">
  <h1 class="pt-3">Items</h1>

  <div class="table-responsive">
    <table class="table">
      <thead>
      <tr>
        <th scope="col">Seller</th>
        <th scope="col">Title</th>
        <th scope="col">Quality</th>
        <th scope="col">Price</th>
        <th scope="col">Color</th>
        <th scope="col">Location</th>
        <th scope="col">Category</th>
        <th scope="col">Sub category</th>
        <th scope="col">Description</th>
        <th colspan="3" scope="col">Operations</th>
      </tr>
      </thead>

      <tbody>
      <% @items.each do |item| %>
        <tr>
          <td scope="col"><%= item.user_id %></td>
          <td scope="col"><%= item.title %></td>
          <td scope="col"><%= item.quality %></td>
          <td scope="col"><%= item.price %></td>
          <td scope="col"><%= item.color %></td>
          <td scope="col"><%= item.location %></td>
          <td scope="col"><%= item.category %></td>
          <td scope="col"><%= item.sub_category %></td>
          <td scope="col"><%= item.description %></td>
          <td><%= link_to 'Show', item %></td>
          <% if item.user_id == current_user.id || current_user.admin %>
            <td><%= link_to 'Edit', edit_item_path(item) %></td>
            <td><%= link_to 'Destroy', item, method: :delete, data: {confirm: 'Are you sure?'} %></td>
          <% end %>
        </tr>
      <% end %>
      </tbody>
    </table>
  </div>

  <br>

  <%= link_to 'New Item', new_item_path %>
</div>

