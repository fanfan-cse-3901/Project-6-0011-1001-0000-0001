<!-- File Edited on 07/23/2020 by Yifan Yao: Insert Bootstrap for better view -->
<!-- File Edited on 07/23/2020 by Troy Stein: Code to account for User id -->
<!-- File Edited on 07/25/2020 by Yifan Yao: Make title in header -->
<!-- File Edited on 07/25/2020 by Yifan Yao: Add roles for Admin -->
<!-- File Edited on 07/27/2020 by Prachiti Garge: Added the chat section -->
<div class="container bg">
  <h1 class="pt-3"><%= @item.title %></h1>

  <p>
    <strong>User:</strong>
    <%= @item.user_id %>
  </p>

  <p>
    <strong>Title:</strong>
    <%= @item.title %>
  </p>

  <p>
    <strong>Quality:</strong>
    <%= @item.quality %>
  </p>

  <p>
    <strong>Price:</strong>
    <%= @item.price %>
  </p>

  <p>
    <strong>Color:</strong>
    <%= @item.color %>
  </p>

  <p>
    <strong>Location:</strong>
    <%= @item.location %>
  </p>

  <p>
    <strong>Category:</strong>
    <%= @item.category %>
  </p>

  <p>
    <strong>Sub category:</strong>
    <%= @item.sub_category %>
  </p>

  <p>
    <strong>Description:</strong>
    <%= @item.description %>
  </p>

  <p>
    <strong>Picture:</strong>
    <% if @item.picture.attached? %>
    <img src="<%=(url_for(@item.picture)) %>" />
    <% end %>
  </p>
  <% if @item.user_id == current_user.id || current_user.admin %>
    <%= link_to 'Edit', edit_item_path(@item) %> |
  <% end %>
  <%= link_to 'Back', items_path %>

  <div class="pr5 mb4">
    <p class="text-align-left f6">Trade author:</p>
    <div class="inline-block nudge-down-10"><%= gravatar_for @item.user, size: 32 %></div>
    <div class="inline-block"><%= @item.user.full_name %></div>
  </div>

  <% if user_signed_in? && current_user.id != @item.user_id %>
    <%= link_to "Message #{@item.user.full_name}", conversations_path(sender_id: current_user.id, receiver_id: @item.user.id), method: 'post', class:"button is-link" %>
  <% elsif user_signed_in? && current_user.id == @item.user_id  %>
    <%= link_to "Conversations", conversations_path %>
  <% else %>

    <%= link_to "Sign up to message #{@item.user.full_name}", new_user_registration_path %>
  <% end %>
</div>